{% extends "snapboard/base_forum.html" %}
{% load i18n pagination_tags %}
{% load avatar_tags %}
{% load extras %}
{% block breadcrumb %}{{ block.super }} &mdash; <h3>{% trans "Watchlist" %}</h3>{% endblock %}
{% block snapboard_main %}

    {% autopaginate posts user_settings.ppp %}
    {% paginate %}

    {% for post in posts %}
    <p><b>
        <a href="{% url snapboard_category_thread_index post.thread.category.id %}">{{ post.thread.category }}</a>:
        <!--<a href="{% url snapboard_thread post.thread.id %}">{{ post.thread.subject }}</a>-->
        <a href="{% url snapboard_thread_post post.id %}">{{ post.thread.subject }}</a>
    </b></p>

    <div id="snap_post{{post.id}}" class="snap_post">
        {% if post.censor %}<div class="post_censored">{% else %}{% ifnotequal post.abuse 0 %}<div class="post_reported">{% endifnotequal %}{% endif %}
        <div id="post_rpc_feedback{{ post.id }}" class="rpc_message">
            <!-- This DIV is for RPC feedback messages for individual posts -->
        </div>
        <p class="post_header">
            <span class="post_menuright">
                    <span class="popup"><a id="watch{{ post.id }}" href="{% url snapboard_watch_post post.id %}?next={{ request.get_full_path|urlencode }}" onclick="set_watch('{{ post.id }}'); return false;">{% trans "dont watch" %}</a></span>
            </span>
            <span class="avatar"> {% avatar post.user %}</span>
            <b><a href="#snap_post{{ post.id }}" onclick="toggle_post('{{ post.id }}'); return false;"><span class="popup" title="Author">{{ post.user }}</span></a></b>
            <span class="timesince"><span class="datetime">{{ post.date|date:"r T" }}<span class="timestamp">{{ post.date|timestamp }}</span></span></span>
            <span class="post_summary" style="display:none;" id="snap_post_sum{{ post.id }}">:
                {{ post.text|post_summary:"30"|safe }}
            </span>
        </p>
        <div style="display:block" id="snap_post_view{{ post.id }}">
            <div class="post_text" style="display:block" id="snap_post_text{{ post.id }}">
                {{ post.text|striptags|render_post|safe }}
            </div>
        </div>
    </div>
    {% if post.censor %}</div>{% else %}{% ifnotequal post.abuse 0 %}</div>{% endifnotequal %}{% endif %}
    <hr class="postend" />
    <hr class="postend" />
    {% endfor %}
    
{% endblock %}
